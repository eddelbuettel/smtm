.\" Automatically generated by Pod::Man 2.28 (Pod::Simple 3.28)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.nr rF 0
.if \n(.g .if rF .nr rF 1
.if (\n(rF:(\n(.g==0)) \{
.    if \nF \{
.        de IX
.        tm Index:\\$1\t\\n%\t"\\$2"
..
.        if !\nF==2 \{
.            nr % 0
.            nr F 2
.        \}
.    \}
.\}
.rr rF
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "SMTM 1"
.TH SMTM 1 "2008-05-25" "perl v5.20.2" "User Contributed Perl Documentation"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
smtm \- Display and update a configurable ticker of global stock quotes
.SH "SYNOPSYS"
.IX Header "SYNOPSYS"
.Vb 1
\& smtm [options] [stock_symbol ...]
.Ve
.SH "OPTIONS"
.IX Header "OPTIONS"
.Vb 10
\& \-\-time min      minutes to wait before update 
\& \-\-file smtmrc   to store/retrieve stocks selected 
\& \-\-proxy pr      network address and port of firewall proxy 
\& \-\-fwall [id:pw] account and password for firewall 
\& \-\-chart len     select length of data interval shown in chart
\&                 (must be one of b, w, 3, 6, 1, 2, 5, m or t)
\& \-\-timeout len   timeout in seconds for libwww\-perl UserAgent
\& \-\-wide          also display value changes and holdings
\& \-\-percent       show relative performance in percent instead of bps
\& \-\-sort style    sort display by specified style
\&                 (must be one r, a, p, v, n, v, V or h)
\& \-\-columns set   choose the columns to display (can be any combination
\&                 of s, n, l, a, r, v, p, V, R, h)
\& \-\-nookbutton    close other windows via left mouseclick, suppress button
\& \-\-help          print a short help message
.Ve
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
\&\fBsmtm\fR, which is a not overly clever acronym for \fBShow Me The
Money\fR, is a financial ticker and portfolio application for quotes
from exchanges around the world (provided they are carried on
Yahoo!). It creates and automatically updates a window with quotes
from Yahoo! Finance. It can also display the entire variety of charts
available at Yahoo! Finance. When called with one or several symbols,
it displays these selected stocks. When \fBsmtm\fR is called without
arguments, it reads the symbols tickers from a file, by default
\&\fI~/.smtmrc\fR. This file can be created explicitly by calling the Save
option from the File menu. Beyond stocks, \fBsmtm\fR can also display
currencies (from the Philadephia exchange), \s-1US\s0 mutual funds, options
on \s-1US\s0 stocks, several precious metals and quite possibly more; see the
Yahoo! Finance website for full information.
.PP
\&\fBsmtm\fR can also aggregate the change in value for both individual
positions and the the entire portfolio.  For this, the number of
shares is needed, as well as the cross-currency expression pair. The
standard \s-1ISO\s0 notation is used. As an example, \s-1GBPUSD\s0 translates from
Pounds into \s-1US\s0 Dollars. To compute annualised returns, the purchase
date and purchase price can also be entered.
.PP
\&\fBsmtm\fR displays the full name of the company, the absolute price
change and the relative percentage change in basispoints (i.e.,
hundreds of a percent) or in percentages if the corresponding option
has been selected.  Other information that can be displayed are the
traded volume, the profit/loss, the aggregate positon value, the
holding period length, the annualised return, the drawdown, the
earnings per share, the price/earnings ratio, the dividend yield, and
the market capitalization. Note that the return calculation ignores
such fine points as dividends, and foreign exchange appreciation or
depreciation for foreigns stocks.  All display columns can be
selected, or deselected, individually.
.PP
Losers are flagged in red.  \fBsmtm\fR can be used for stocks from the
\&\s-1USA,\s0 Canada, various European exchanges, various Asian exchanges
(Singapore, Taiwan, HongKong, Kuala Lumpur, ...) Australia and New
Zealand. It should work for other markets supported by Yahoo. \s-1US\s0
mutual funds are also available, but less relevant as their net asset
value is only computed after the market close. Some fields might be
empty if Yahoo! does not supply the full set of fields; the number of
supported fields varies even among \s-1US\s0 exchanges. The sorting order can
be chosen among eight different options.
.PP
The quotes and charts are delayed, typically 15 minutes for \s-1NASDAQ\s0 and
20 minutes otherwise, see \fIhttp://finance.yahoo.com\fR for details. New
Zealand is rumoured to be somewhat slower with a delay of one
hour. However, it is worth pointing out that (at least some) \s-1US\s0)
indices are updated in real time at Yahoo!, and therefore available in
real time to \fBsmtm\fR.  Intra-day and five-day charts are updated
during market hours by Yahoo!, other charts with longer timeframes are
updated only once a week by Yahoo!.
.PP
\&\fBsmtm\fR supports both simple proxy firewalls (via the \fI\-\-proxy\fR option) 
and full-blown firewalls with account and password authorization (via the 
\&\fI\-\-fwall\fR option). Firewall account name and password can be specified as 
command line arguments after \fI\-\-fwall\fR, or else in a pop-up window. This 
setup has been in a few different environments.
.PP
\&\fBsmtm\fR can display two more views of a share position. Clicking mouse
button 1 launches a detailed view with price, date, change, volume,
bid, ask, high, low, year range, price/earnings, dividend, dividend
yield, market capital information, number of shares held and
annualised return. However, not all of that information is available
at all exchanges.  Clicking the right mouse button display a chart of
the corresponding stock; this only works for \s-1US\s0 and Canadian stocks.
The type of chart can be specified either on the command-line, or via
the Chart menu. Choices are intraday, five day, three months, six
months, one year, two years, five years or max years. The default chart
is a five day chart. The middle mouse button opens an edit window to
modify and augment the information stored per stock.
.PP
See \fIhttp://help.yahoo.com/help/us/fin/chart/\fR for help on Yahoo!
Finance charts.
.PP
\&\fBsmtm\fR has been written and tested under Linux. It should run under
any standard Unix, success with Solaris, HP-UX and FreeBSD is
confirmed (but problems are reported under Solaris when a threaded
version of Perl is used). It also runs under that other \s-1OS\s0 from
Seattle using the \fBActivePerl\fR implementation from
\&\fIhttp://www.activestate.com\fR.  In either case, it requires the
\&\fIPerl/Tk\fR module for windowing, and the \fI\s-1LWP\s0\fR module (also known as
\&\fIlibwww-perl\fR) for data retrieval over the web. The excellent
\&\fIDate::Manip\fR modules is also required for the date parsing and
calculations. With recent versions of ActivePerl, only Date::Manip
needs to be installed on top of the already provided modules.
.SH "EXAMPLES"
.IX Header "EXAMPLES"
.Vb 1
\&  smtm CSCO NT
.Ve
.PP
creates a window following the Cisco and Nortel stocks.
.PP
.Vb 1
\&  smtm MSFT:Bill SUNW:Scott ORCL:Larry
.Ve
.PP
follows three other tech companies and uses the override feature for
the displayed name. [ Historical note: We once needed that for
European stocks as Yahoo! did not supply the company name way back in
1999 or so. This example just documents a now ancient feature. ]
.PP
.Vb 3
\&  smtm  BT.A.L::10:GBPCAD   T::10:USDCAD \e
\&        BCE.TO::10   13330.PA::10:EURCAD \e
\&        "555750.F:DT TELECOM:10:EURCAD"
.Ve
.PP
creates a window with prices for a handful of telecom companies on
stock exchanges in London, New York, Toronto, Paris and
Frankfurt. Note how a names is specified to override the verbose
default for the German telco.  Also determined are the number of
shares, here 10 for each of the companies. Lastly, this example
assumes a Canadian perspective: returns are converted from British
pounds, \s-1US\s0 dollars and Euros into Canadian dollars. Quotation marks
have to be used to prevent the shell from splitting the argument
containing spaces. [ Historical note: The Deutsche Telecom stock can
now also be referenced as DTEGn.DE; similarly other stock previously
available only under their share number are now accessible using an
acronym reflecting their company name.]
.SH "MENUS"
.IX Header "MENUS"
Four menus are supported: \fIFile\fR, \fIEdit\fR, \fIChart\fR and \fIHelp\fR.  The
\&\fIFile\fR menu offers to load or save to the default file, or to 'save
as' a new file.  \fIExit\fR is also available.
.PP
The \fIEdit\fR menu can launch windows to either add a new stock or
delete one or several from a list box. Submenus for column selection
based on various criteria are available. Similarly, the \fISort\fR menu
allows to select one of eight different sort options.  Further, one
can modify the delay time between updates and choose between the
default title display or the wide display with changes in the position
and total position value.
.PP
The \fICharts\fR menu allows to select the default chart among the eight
choices intraday, five day, three months, six months, one year, two
years, five years or 'max' years. Chart sizes can be selected among
three choices. Plot types can be selected among line chart, bar chart
and the so-called candlestick display. For both moving averages and
exponential moving averages, six choices are avilable (5, 10, 20, 50,
100 and 200 days, respectively) which can all be selected (or
deselected) individually. Similarly, any one of seven popular
technical analysis charts can be added. Logarithmic scale can be
turned on/off. Volume bar charts as also be selected or
deselected. Similarly, Bollinger bands and the parabolic \s-1SAR\s0 can be
selected. A selection box can be loaded to enter another symbol (or
several of these, separated by comma) for performance
comparison. Lastly, the gallery command can launch the display of a
chart for each and every stock symbol currenly loaded in the smtm
display.  Note that intra-day and intra-week charts do not offer all
the various charting options longer-dated charts have available.  Once
charts are shown, they are also updated regularly at the same interval
the main displayed is updated at.
.PP
Lastly, the \fIHelp\fR menu can display either the text from the manual
page, or the copyright information in a new window.
.SH "DISPLAY"
.IX Header "DISPLAY"
The main window is very straightforward. For each of the stocks, up to
eleven items can be displayed: its symbol, its name, its most recent
price, the change from the previous close in absolute terms, the
change in relative terms, the volume, the profit or loss, the total
position value, the holding period, the annualised return (bar F/X
effects or dividends) and the drawdown relative to the 52\-week high.
The relative change is either expressed in basispoints (bps), which
are 1/100s of a percent, or in percent; this can be controlled via a
checkbutton as well as an command-line option.  Further display
options are earnings per share, price/earnings ratio, dividend yield
and market capitalization.  This display window is updated in regular
intervals; the update interval can be specified via a menu or a
command-line option.
.PP
The window title displays the relative portfolio profit or loss for
the current day in basispoints, i.e., hundreds of a percent, or in
percent if the corresponding option is chosen, as well as the date of
the most recent update. If the \fI\-\-wide\fR options is used, the net
change and ney value of the portfolio (both in local currency) are
also displayed.
.PP
Clicking on any of the stocks with the left mouse button opens a new
window with all available details for a stock. Unfortunately, the
amount of available information varies. Non-North American stocks only
have a limited subset of information made available via the csv
interface of Yahoo!. For North American stocks, not all fields all
provided by all exchanges. Clicking on the details display window
itself closes this window. Clicking on any of the stocks with the
right mouse button opens a new window with a chart of the given stock
in the default chart format. This option was initially available only
for North American stocks but now works across most if not all
markets, thanks to expanded support by Yahoo!.  Clicking on the chart
window itself closes this window. Finally, the middle mouse button
opens an edit window.
.SH "CHART DISPLAY (AKA 'GALLERY' MODE)"
.IX Header "CHART DISPLAY (AKA 'GALLERY' MODE)"
In 'gallery' mode, chart windows are opened for all active securities.
These charts are automatically updated whenever the display is
updated.  This mean that only the intra-daily and intra-weekly chart
timeframe selection are meaningful \*(-- all others are updated at the
source, i.e. Yahoo!, daily or weekly, and there is no little point in
downloading the same chart over and over again.
.PP
However, for intra-daily and intra-weekly charts, this is a very
useful feature. It should be noted that not all chart size, chart
timeframe and chart option permutations actually lead to existing
charts. For example, logarithmic scale does seem to exist for
shorter-dated time frames. Neither does the 'small' chart size.
.SH "BUGS"
.IX Header "BUGS"
Closing the stock addition or deletion windows have been reported to
cause random segmentation violation under Linux. This appears to be a
bug in Perl/Tk which will hopefully be solved, or circumvented, soon.
This bug does not bite under Solaris, FreeBSD or \s-1NT\s0 or other Linux
distributions. Update: This problem appears to have disappeared with
Perl 5.6.*.
.PP
Problems with undefined symbols have been reported under Solaris 2.6
when Perl has been compiled with thread support. Using an unthreaded
Perl binary under Solaris works. How this problem can be circumvented
is presently unclear.
.PP
It is not clear whether the market capitalization information is 
comparable across exchange. Some differences could be attributable to
\&'total float' versus 'free float' calculations.
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIFinance::YahooQuote.3pm\fR, \fIFinance::YahooChart.3pm\fR, \fI\s-1LWP\s0.3pm\fR,
\&\fIlwpcook.1\fR, \fITk::UserGuide.3pm\fR
.PP
See \fIhttp://help.yahoo.com/help/us/fin/chart/\fR for help on Yahoo!
Finance charts.
.SH "COPYRIGHT"
.IX Header "COPYRIGHT"
smtm is (c) 1999 \- 2008 by Dirk Eddelbuettel <edd@debian.org>
.PP
Updates to this program might appear at
\&\fIhttp://dirk.eddelbuettel.com/code/smtm.html\fR. If you enjoy this
program, you might also want to look at my beancounter program
\&\fIhttp://dirk.eddelbuettel.com/code/beancounter.html\fR, as well as the
Finance::YahooQuote module at
\&\fIhttp://dirk.eddelbuettel.com/code/yahooquote.html\fR which was
originally written by Dj Padzensky, and that is used by both \fBsmtm\fR
and \fBbeancounter\fR.
.PP
This program is free software; you can redistribute it and/or modify
it under the terms of the \s-1GNU\s0 General Public License as published by
the Free Software Foundation; either version 2 of the License, or
(at your option) any later version.  There is \s-1NO\s0 warranty whatsoever.
.PP
The information that you obtain with this program may be copyrighted
by Yahoo! Inc., and is governed by their usage license.  See
\&\fIhttp://www.yahoo.com/docs/info/gen_disclaimer.html\fR for more
information.
.SH "ACKNOWLEDGEMENTS"
.IX Header "ACKNOWLEDGEMENTS"
The Perl code by Dj Padzensky, in particular his
\&\fBFinance::YahooQuote\fR module (originally on the web at
\&\fIhttp://www.padz.net/~djpadz/YahooQuote/\fR and now maintained by me at
\&\fIhttp://dirk.eddelbuettel.com/code/yahooquote.html/\fR) and his
Finance::YahooChart module (on the web at
\&\fIhttp://www.padz.net/~djpadz/YahooChart/\fR) were most helpful. They
provided the initial routines for downloading stock data and
determining the Yahoo! Chart url. Earlier version of \fBsmtm\fR use a
somewhat rewrittem variant (which still reflected their heritage),
newer version rely directly on \fBFinance::YahooQuote\fR now that Yahoo!
uses a similar backend across the globe. Dj's code contribution is
most gratefully acknowledged.
.SH "CPAN"
.IX Header "CPAN"
The remaining sections pertain to the \s-1CPAN\s0 registration of
\&\fBsmtm\fR. The script category is a little mismatched but as there is no
Finance section, \fINetworking\fR was as good as the other choices.
.SH "SCRIPT CATEGORIES"
.IX Header "SCRIPT CATEGORIES"
Networking
.SH "PREREQUISITES"
.IX Header "PREREQUISITES"
On Windows, \fIsmtm\fR can use the Perl distribution from
\&\fIhttp://www.activestate.com\fR.  On both Unix and Windows, \fBsmtm\fR
requires the \f(CW\*(C`Tk\*(C'\fR module for windowing, the \f(CW\*(C`LWP\*(C'\fR module for data
retrieval over the web, and the excellent \f(CW\*(C`Date::Manip\*(C'\fR module for
the date parsing and calculations. Finance::YahooQuote is used for
actual data access. Tk::PNG is used to display the png charts since
Yahoo! switched from gif to png around May 2005.
.SH "COREQUISITES"
.IX Header "COREQUISITES"
None.
.SH "OSNAMES"
.IX Header "OSNAMES"
\&\fIsmtm\fR is not \s-1OS\s0 dependent. It is known to run under Linux, several
commercial Unix variants and Windows
.SH "README"
.IX Header "README"
\&\fBsmtm\fR, which is a not overly clever acronym for \fBShow Me The
Money\fR, is a financial ticker and portfolio application for quotes
from exchanges around the world (provided they are carried on
Yahoo!). It creates and automatically updates a window with quotes
from Yahoo! Finance. It can also display the entire variety of charts
available at Yahoo! Finance. Fairly extensive documentation for
\&\fBsmtm\fR is available at \fIhttp://dirk.eddelbuettel.com/code/smtm.html\fR.
